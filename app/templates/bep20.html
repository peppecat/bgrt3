<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bep20</title>
    <link rel="stylesheet" href="/main_style.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='main_style.css') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon-32x32.png') }}"> <!-- FAVICON -->
</head>
<body>
    <div class="crypto-pay-adress">
        <div class="main-block-1">
            <div class="main-block-content">
                <div class="process-page">
                    <h1 class="crypto-adressTitle">Payment details</h1>
                    <div class="crypto-form-fs">
                        <div class="crypto-payment-info-cont">
                            <div class="crypto-pay-currency">
                                <img src="https://www.svgrepo.com/show/367256/usdt.svg" alt="">
                                <div class="flex-cont-2">
                                    Pay with
                                    <span class="black-text">USDT (BEP20)</span>
                                </div>
                            </div>
                            <div class="crypto-payment-cont">
                                <div class="crypto-form-cont">
                                    <div class="crypto-form-cont-label">We must receive Amount:</div>
                                    <div class="rounded-grey-rect">
                                        <img src="https://www.svgrepo.com/show/367256/usdt.svg" alt="">
                                        <span>
                                            <span class="to-copy">{{ amount }}</span>

                                            <span class="curr">USD</span>
                                        </span>
                                        <span class="btn-copy"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-files" viewBox="0 0 16 16"><path d="M13.54,0H4.92A2.27,2.27,0,0,0,2.46,2,2.27,2.27,0,0,0,0,4V14a2.27,2.27,0,0,0,2.46,2h8.62a2.27,2.27,0,0,0,2.46-2A2.27,2.27,0,0,0,16,12V2A2.27,2.27,0,0,0,13.54,0Zm0,13V4a2.27,2.27,0,0,0-2.46-2H3.69A1.13,1.13,0,0,1,4.92,1h8.62a1.13,1.13,0,0,1,1.23,1V12A1.13,1.13,0,0,1,13.54,13ZM1.23,4A1.13,1.13,0,0,1,2.46,3h8.62a1.13,1.13,0,0,1,1.23,1V14a1.13,1.13,0,0,1-1.23,1H2.46a1.13,1.13,0,0,1-1.23-1Z"></path></svg></span>
                                    </div>
                                </div>
                                <div class="crypto-form-cont">
                                    <div class="crypto-form-cont-label">USDT (BEP20) address:</div>
                                    <div class="rounded-grey-rect">
                                        <img src="https://www.svgrepo.com/show/367256/usdt.svg" alt="">
                                        <span>
                                            <span class="to-copy adress-to-copy">{{ bep20_address }}</span>
                                        </span>
                                        <span class="btn-copy">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-files" viewBox="0 0 16 16">
                                                <path d="M13.54,0H4.92A2.27,2.27,0,0,0,2.46,2,2.27,2.27,0,0,0,0,4V14a2.27,2.27,0,0,0,2.46,2h8.62a2.27,2.27,0,0,0,2.46-2A2.27,2.27,0,0,0,16,12V2A2.27,2.27,0,0,0,13.54,0Zm0,13V4a2.27,2.27,0,0,0-2.46-2H3.69A1.13,1.13,0,0,1,4.92,1h8.62a1.13,1.13,0,0,1,1.23,1V12A1.13,1.13,0,0,1,13.54,13ZM1.23,4A1.13,1.13,0,0,1,2.46,3h8.62a1.13,1.13,0,0,1,1.23,1V14a1.13,1.13,0,0,1-1.23,1H2.46a1.13,1.13,0,0,1-1.23-1Z"></path>
                                            </svg>
                                        </span>
                                    </div>
                                </div>
                                <div class="crypto-form-cont">
                                    <div class="crypto-form-cont-label">Network:</div>
                                    <div class="rounded-grey-rect crypto-network-2">
                                        <span>BSC (BEP20)</span>
                                    </div>
                                </div>
                                <div class="crypto-status-cont">
                                    Payment page will expire in
                                    <div class="time-circle-wrap">            
                                        <span class="minutes-text black-text" id="minutes">10</span>:
                                        <span class="seconds-text black-text" id="seconds">00</span>
                                    </div>
                                    <span class="black-text">Once payment sent Confirm</span>
                                </div>
                                <div class="crypto-buttons-cont">
                                    <button class="btn-red">Confirm</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/js/main.js"></script>
    <script src="{{ url_for('static', filename='main.js') }}"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const amount = urlParams.get('amount');
            if (amount) {
                const amountElement = document.querySelector('.to-copy');
                if (amountElement) {
                    amountElement.textContent = parseFloat(amount).toFixed(2);
                }
            }
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const amount = urlParams.get('amount');
    
            if (amount) {
                const amountElement = document.querySelector('.to-copy');
                if (amountElement) {
                    amountElement.textContent = parseFloat(amount).toFixed(2);
                }
            }
    
            document.querySelector('.btn-red').addEventListener('click', function() {
                fetch("{{ url_for('bep20_success') }}?amount=" + amount, {
                    method: "GET"
                })
                .then(response => {
                    if (response.ok) {
                        window.location.href = "{{ url_for('bep20_success') }}?amount=" + amount;
                    } else {
                        alert("Ошибка при обработке платежа");
                    }
                })
                .catch(error => {
                    console.error("Ошибка запроса:", error);
                });
            });
        });
    </script>
    
</body>
</html>
